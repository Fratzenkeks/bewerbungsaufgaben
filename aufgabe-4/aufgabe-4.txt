private List<String> keypresses = new ArrayList<>();
private StringBuilder text = new StringBuilder();
private List<String> redoStack = new ArrayList<>();

public void keypress(String key) {
	text.append(key);
	keypresses.add(key);
	redoStack.clear();
}

public void undo() {
	if (!keypresses.isEmpty()) {
		String lastKey = keypresses.remove(keypresses.size() - 1);
		text.deleteCharAt(text.length() - 1);
		redoStack.add(lastKey);
	}
}

public void redo() {
	if (!redoStack.isEmpty()) {
		String key = redoStack.remove(redoStack.size() - 1);
		text.append(key);
		keypresses.add(key);
	}
}